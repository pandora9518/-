import{I as S,d as G,k as g,A as H,r,o as _,g as w,w as t,h as e,u as n,a as V,x as C,y as i,t as h,c as z,F as I,f as N,L as m,p as J,b as K,_ as Q}from"./index-511768d2.js";const W=(s,p)=>S.get(`/admin/product/list/${s}/${p}`),X=s=>S.get("/admin/product/onSale/"+s),Y=s=>S.get("/admin/product/cancelSale/"+s),Z=s=>S.get("/admin/product/getSkuInfo/"+s),ee=s=>S.delete("/admin/product/deleteSku/"+s),te=s=>(J("data-v-46b6a2c1"),s=s(),K(),s),ae=["src"],le=te(()=>V("h4",null,"查看商品详情",-1)),ne=["src"],se=G({__name:"index",setup(s){let p=g(1),y=g(10),q=g(0),L=g([]),d=g({}),x=g(!1);H(()=>{k()});let k=async(u=1)=>{p.value=u;let l=await W(p.value,y.value);q.value=l.data.total,L.value=l.data.records},B=u=>{k()},D=async u=>{u.isSale?(await Y(u.id)).code==200?(m({type:"error",message:"产品已下架"}),k()):m({type:"error",message:"产品下架失败"}):(await X(u.id)).code==200&&(m({type:"success",message:"产品上架成功"}),k())},U=async u=>{x.value=!0;let l=await Z(u.id);l.code==200?(m({type:"success",message:"获取商品详情成功"}),d.value=l.data):m({type:"error",message:"获取商品详情失败"})},E=async u=>{let l=await ee(u.id);l.code==200?m({type:"success",message:"删除商品成功"}):m({type:"error",message:l.message})};return(u,l)=>{const c=r("el-table-column"),b=r("el-button"),F=r("el-popconfirm"),$=r("el-table"),M=r("el-pagination"),o=r("el-col"),f=r("el-row"),A=r("el-tag"),R=r("el-carousel-item"),T=r("el-carousel"),j=r("el-drawer"),O=r("el-card");return _(),w(O,null,{default:t(()=>[e($,{style:{margin:"10px 0"},border:"",data:n(L)},{default:t(()=>[e(c,{label:"序号",type:"index",align:"center",width:"80px"}),e(c,{label:"名称",width:"160px",prop:"skuName"}),e(c,{label:"描述",width:"160px",prop:"skuDesc"}),e(c,{label:"图片",width:"160px"},{default:t(({row:a,$index:v})=>[V("img",{src:a.skuDefaultImg,alt:"图片加载中",style:{width:"100px",height:"100px"}},null,8,ae)]),_:1}),e(c,{label:"重量",width:"160px",prop:"weight"}),e(c,{label:"价格(元)",width:"160px",prop:"price"}),e(c,{label:"操作",width:"250px",fixed:"right"},{default:t(({row:a,$index:v})=>[e(b,{type:a.isSale==1?"info":"primary",size:"small",icon:a.isSale==1?"Bottom":"Top",onClick:P=>n(D)(a)},null,8,["type","icon","onClick"]),e(b,{type:"primary",size:"small",icon:"Edit"}),e(b,{type:"info",size:"small",icon:"InfoFilled",onClick:P=>n(U)(a)},null,8,["onClick"]),e(F,{title:"你确定删除商品吗",onConfirm:n(E),width:"200px"},{reference:t(()=>[e(b,{type:"danger",size:"small",icon:"Delete"})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(M,{"current-page":n(p),"onUpdate:currentPage":l[0]||(l[0]=a=>C(p)?p.value=a:p=a),"page-size":n(y),"onUpdate:pageSize":l[1]||(l[1]=a=>C(y)?y.value=a:y=a),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper,->,sizes,total",total:n(q),onSizeChange:n(B),onCurrentChange:n(k)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),e(j,{modelValue:n(x),"onUpdate:modelValue":l[2]||(l[2]=a=>C(x)?x.value=a:x=a),direction:"rtl",style:{"font-size":"16px"}},{header:t(()=>[le]),default:t(()=>[e(f,{style:{margin:"10px 0"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("名称")]),_:1}),e(o,{span:18},{default:t(()=>[i(h(n(d).skuName),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("描述")]),_:1}),e(o,{span:18},{default:t(()=>[i(h(n(d).skuDesc),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("价格")]),_:1}),e(o,{span:18},{default:t(()=>[i(h(n(d).price),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("平台属性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),z(I,null,N(n(d).skuAttrValueList,(a,v)=>(_(),w(A,{key:a.id},{default:t(()=>[i(h(a.attrName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("销售属性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),z(I,null,N(n(d).skuSaleAttrValueList,(a,v)=>(_(),w(A,{key:a.id},{default:t(()=>[i(h(a.saleAttrName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[i("商品图片")]),_:1}),e(o,{span:18},{default:t(()=>[e(T,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(_(!0),z(I,null,N(n(d).skuImageList,a=>(_(),w(R,{key:a.id},{default:t(()=>[V("img",{src:a.imgUrl,alt:"",style:{width:"100%",height:"100%"}},null,8,ne)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});const re=Q(se,[["__scopeId","data-v-46b6a2c1"]]);export{re as default};
